import folium

# Crea la mappa centrata su Marrakech
m = folium.Map(location=[31.63, -7.99], zoom_start=13)

def create_popup_html(place_name, lat, lon):
    """
    Crea una stringa HTML per il popup,
    con un link cliccabile che apre Google Maps sulle coordinate indicate.
    """
    gmaps_url = f"https://www.google.com/maps/search/?api=1&query={lat}%2C{lon}"
    return f'<b>{place_name}</b><br><a href="{gmaps_url}" target="_blank">Apri su Google Maps</a>'

# =============================================================================
# 1) RIAD (icone colore blue, icon='home')
# =============================================================================

# Riad De Vinci & SPA
lat, lon = 31.6345, -7.9922
popup_html = create_popup_html("Riad De Vinci & SPA", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html, max_width=250),
    tooltip="Riad De Vinci & SPA",
    icon=folium.Icon(color='blue', icon='home', prefix='fa')
).add_to(m)

# Dar Daoud
lat, lon = 31.6312, -7.9889
popup_html = create_popup_html("Dar Daoud", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html, max_width=250),
    tooltip="Dar Daoud",
    icon=folium.Icon(color='blue', icon='home', prefix='fa')
).add_to(m)

# Riad 1001 couleurs
lat, lon = 31.6374, -7.9910
popup_html = create_popup_html("Riad 1001 couleurs", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html, max_width=250),
    tooltip="Riad 1001 couleurs",
    icon=folium.Icon(color='blue', icon='home', prefix='fa')
).add_to(m)

# Riad Minorisa
lat, lon = 31.6318, -7.9927
popup_html = create_popup_html("Riad Minorisa", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html, max_width=250),
    tooltip="Riad Minorisa",
    icon=folium.Icon(color='blue', icon='home', prefix='fa')
).add_to(m)

# =============================================================================
# 2) ATTRAZIONI (icone colore red, icon='info-sign')
# =============================================================================

# Jemaa el-Fnaa
lat, lon = 31.6258, -7.9891
popup_html = create_popup_html("Jemaa el-Fnaa", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="Jemaa el-Fnaa",
    icon=folium.Icon(color='red', icon='info-sign')
).add_to(m)

# Moschea Koutoubia
lat, lon = 31.6215, -7.9937
popup_html = create_popup_html("Moschea Koutoubia", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="Moschea Koutoubia",
    icon=folium.Icon(color='red', icon='info-sign')
).add_to(m)

# Palazzo Bahia
lat, lon = 31.6227, -7.9810
popup_html = create_popup_html("Palazzo Bahia", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="Palazzo Bahia",
    icon=folium.Icon(color='red', icon='info-sign')
).add_to(m)

# Palazzo El Badi
lat, lon = 31.6186, -7.9884
popup_html = create_popup_html("Palazzo El Badi", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="Palazzo El Badi",
    icon=folium.Icon(color='red', icon='info-sign')
).add_to(m)

# Giardini Majorelle
lat, lon = 31.6372, -8.0026
popup_html = create_popup_html("Giardini Majorelle", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="Giardini Majorelle",
    icon=folium.Icon(color='red', icon='info-sign')
).add_to(m)

# Madrasa di Ben Youssef
lat, lon = 31.6336, -7.9879
popup_html = create_popup_html("Madrasa di Ben Youssef", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="Madrasa di Ben Youssef",
    icon=folium.Icon(color='red', icon='info-sign')
).add_to(m)

# Tombe Saadiane
lat, lon = 31.6163, -7.9888
popup_html = create_popup_html("Tombe Saadiane", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="Tombe Saadiane",
    icon=folium.Icon(color='red', icon='info-sign')
).add_to(m)

# Dar El Bacha
lat, lon = 31.6333, -7.9966
popup_html = create_popup_html("Dar El Bacha (Musée des Confluences)", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="Dar El Bacha",
    icon=folium.Icon(color='red', icon='info-sign')
).add_to(m)

# Museo YSL
lat, lon = 31.6379, -8.0033
popup_html = create_popup_html("Museo Yves Saint Laurent", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="Museo YSL",
    icon=folium.Icon(color='red', icon='info-sign')
).add_to(m)

# La Menara
lat, lon = 31.6082, -8.0159
popup_html = create_popup_html("La Menara", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="Giardini della Menara",
    icon=folium.Icon(color='red', icon='info-sign')
).add_to(m)

# Quartiere Mellah
lat, lon = 31.6196, -7.9819
popup_html = create_popup_html("Quartiere Mellah", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="Quartiere Mellah",
    icon=folium.Icon(color='red', icon='info-sign')
).add_to(m)

# Cyber Parc Arsat Moulay Abdeslam
lat, lon = 31.6244, -8.0016
popup_html = create_popup_html("Cyber Parc Arsat Moulay Abdeslam", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="Cyber Parc Arsat Moulay Abdeslam",
    icon=folium.Icon(color='red', icon='info-sign')
).add_to(m)

# =============================================================================
# 3) DESERTI (icone colore gray, icon='flag')
# =============================================================================

# Deserto di Agafay
lat, lon = 31.3075, -8.0331
popup_html = create_popup_html("Deserto di Agafay", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="Deserto di Agafay",
    icon=folium.Icon(color='gray', icon='flag', prefix='fa')
).add_to(m)

# Zagora
lat, lon = 30.3214, -5.8351
popup_html = create_popup_html("Zagora", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="Deserto di Zagora",
    icon=folium.Icon(color='gray', icon='flag', prefix='fa')
).add_to(m)

# Merzouga (Erg Chebbi)
lat, lon = 31.1000, -4.0000
popup_html = create_popup_html("Merzouga (Erg Chebbi)", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="Deserto di Merzouga",
    icon=folium.Icon(color='gray', icon='flag', prefix='fa')
).add_to(m)

# =============================================================================
# 4) RISTORANTI (icone colore green, icon='cutlery')
# =============================================================================

# Nomad
lat, lon = 31.6298, -7.9874
popup_html = create_popup_html("Nomad (cucina marocchina rivisitata)", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="Nomad",
    icon=folium.Icon(color='green', icon='cutlery', prefix='fa')
).add_to(m)

# Café Des Épices
lat, lon = 31.6299, -7.9868
popup_html = create_popup_html("Café Des Épices", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="Café Des Épices",
    icon=folium.Icon(color='green', icon='cutlery', prefix='fa')
).add_to(m)

# Le Jardin
lat, lon = 31.6320, -7.9967
popup_html = create_popup_html("Le Jardin", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="Le Jardin",
    icon=folium.Icon(color='green', icon='cutlery', prefix='fa')
).add_to(m)

# Café Clock
lat, lon = 31.6157, -7.9891
popup_html = create_popup_html("Café Clock (camel burger, menù creativo)", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="Café Clock",
    icon=folium.Icon(color='green', icon='cutlery', prefix='fa')
).add_to(m)

# Dar Zellij
lat, lon = 31.6391, -7.9912
popup_html = create_popup_html("Dar Zellij (cucina tradizionale in riad storico)", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="Dar Zellij",
    icon=folium.Icon(color='green', icon='cutlery', prefix='fa')
).add_to(m)

# La Famille
lat, lon = 31.6234, -7.9841
popup_html = create_popup_html("La Famille (cucina vegetariana/vegana)", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="La Famille",
    icon=folium.Icon(color='green', icon='cutlery', prefix='fa')
).add_to(m)

# Naranj
lat, lon = 31.6228, -7.9813
popup_html = create_popup_html("Naranj (cucina libanese e marocchina)", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="Naranj",
    icon=folium.Icon(color='green', icon='cutlery', prefix='fa')
).add_to(m)

# 16 Café
lat, lon = 31.6333, -8.0104
popup_html = create_popup_html("16 Café (pasticceria e caffè in Gueliz)", lat, lon)
folium.Marker(
    location=[lat, lon],
    popup=folium.Popup(popup_html),
    tooltip="16 Café",
    icon=folium.Icon(color='green', icon='cutlery', prefix='fa')
).add_to(m)

# =============================================================================
# VISUALIZZA / SALVA LA MAPPA
# =============================================================================

# Se sei in Jupyter/Colab, mostra la mappa interattiva:
m
